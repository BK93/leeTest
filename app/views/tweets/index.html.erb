<%= stylesheet_link_tag "test", :media => "all" %>
<div class="row">
<div class="container">

<% tweet_count = Tweet.where(user_id: current_user.id).count %>
<% retweet_count = Retweet.where(user_id: current_user.id).count %>
<% comment_count = Comment.where(user_id: current_user.id).count %>
<% tweets_count = tweet_count + retweet_count + comment_count %>

<div class="col-md-3" >	
	<div class="modal-header"> 
	<div class="row">
	</div>
	  <div class="col-sm-9">
		<div class="row">
		  <div class="col-xs-8 col-sm-6">
			<img class="modal-img-rounded" alt="img" height="80" width="80" src="<%= current_user.image %>">
		  </div>
		  <div class="col-xs-4 col-sm-6">
			<div class="username">
				<h4><%= current_user.username %></h4>
				<h6>@<%= current_user.userId %></h6>
			</div>	
		  </div>
		</div>
	  </div>
	</div>

	<div class="modal-footer">
		<div class="an">
			<h6><%= link_to "TWEETS", tweet_pages_path %></h6>
			<h4><%= tweets_count %></h4>
		</div>
		<div class="an">
			<h6><%= link_to "FOLLOWINGS", following_pages_path %></h6>
			<h4><%= Follow.where(user_id: current_user.id).count %></h4>
		</div>
		<div class="an">
			<h6><%= link_to "FOLLOWERS", followers_pages_path %></h6>
			<h4><%= Follow.where(follow_id: current_user.id).count %></h4>
		</div>
	</div>
</div>

<div class="col-md-6">
	<div class="modal-header-center">	
		<table>
			<tr>
				<td width="3%">
					<img alt="img" class="img-rounded" height="32" width="32" src="<%= current_user.image %>">
				</td>
				<td width="60%">
					<%= form_for @tweet do |f| %>
					  <input class="form-control" type=<%= f.text_field :content,:placeholder => "What's happening?" %>
					  <%= f.hidden_field :user_id, :value => current_user.id %>
					  <%= f.hidden_field :image, :value => current_user.image %>
					  <%= f.hidden_field :tweet_userId, :value => current_user.userId %>
					  <%= f.hidden_field :tweet_username, :value => current_user.username %>

					  <% if @tweet.errors.any? %>
						<%= @tweet.errors.messages[:content][0] %>
					  <% end %>
					<% end %>
				</td>
			</tr>
		</table>
	</div>

	<div class="modal-footer-center">
		<div class="center-tweet-all"> 
			<% Hash[@tweets_hash].values.each do |tweet| %>
				<% if tweet.kind_of?(Tweet) %>	
					<div class="center-tweet">
						<div class="center-tweet-image">
						   <img class="img-rounded" alt="img" height="40" width="40" src="<%= tweet.user.image %>" />
						</div>
						
						<div class="center-tweet-right">
							<div class="center-tweet-right-username">
								<strong><%= tweet.user.username %></strong>
							</div>	
							<div class="center-tweet-right-userId">
								@<%= tweet.user.userId %>&nbspãƒ»
								<%= tweet.created_at %>
							</div>								
							<div class="center-tweet-right-content">
								<div class="font">
									<%= tweet.content %>
								</div>
							</div>
							
							<div class="center-tweet-right-bt">
								<%= link_to image_tag("reply_bt.png", :size => "15x15"), new_tweet_comment_path(tweet.id, @tweet) %>
							</div>	
							<div class="center-tweet-right-bt">
								<%= link_to image_tag("retweet_bt.png", :size => "20x20"), new_tweet_retweet_path(tweet.id, @tweet) %>			  
							</div>
							<div class="center-tweet-right-bt">
								<% if Like.new.likable_for?(current_user, tweet) %>
									<%= link_to image_tag("favorite_bt.png", :size => "15x15"), tweet_like_path(tweet.id, id: tweet.id), :method => :delete %>
								<% else %>
									<%= link_to image_tag("favorite_bt2.png", :size => "15x15"), tweet_likes_path(tweet_id: tweet.id), method: :post %>
								<% end %>
								<%= tweet.likes.count %>
							</div>	
							
							<div class="center-tweet-right-delete">
								<%= link_to tweet_path(tweet.id), method: :delete, class: "btn btn-default btn-sm", data: { confirm: "Are you sure?" } do %>
									Delete
								<% end %>
							</div>
						</div>	
					</div>
					
					<!-- comment -->
					<% tweet.comments.each do |comment| %>
						<div class="center-tweet">
							<div class="center-tweet-image">
								<img class="img-rounded" alt="img" height="40" width="40" src="<%= comment.image %>" />
							</div>
							
							<div class="center-tweet-right">
								<div class="center-tweet-right-username">
									<strong><%= comment.username %></strong>
									@ <%= comment.created_at %>
								</div>
							</div>
							
							<div class="center-tweet-right-content">
								<div class="font">
									<%= comment.comment %>
								</div>
							</div>
							
							<div class="center-tweet-right-delete">
								<%= link_to tweet_comment_path(comment.tweet_id, comment.id), method: :delete, class: "btn btn-default btn-sm", data: { confirm: "Are you sure?" } do %>
									Delete
								<% end %>
							</div>
						</div>
					<% end %>
					
				<% else %>
					<div class="center-tweet">
						<div class="center-retweet-icon">
							<%= image_tag "retweet_icon.png", size: "16x18" %>
							<%= tweet.user.username %> 
							retweeted
						</div>
						
						<div class="center-tweet-image">						   
							<img alt="img" class="img-rounded" height="40" width="40" src="<%= tweet.image %>" />
						</div>
								
						<div class="center-tweet-right">
							<div class="center-tweet-right-username">
								<strong><%= tweet.tweet_username %></strong>
							</div>
							
							<div class="center-tweet-right-userId">
								@<%= tweet.tweet_userId %>&nbsp&nbsp
								<%= tweet.created_at %>
							</div>
							
							<div class="center-tweet-right-content">
								<div class="font">
									<%= tweet.content %>
								</div>
							</div>
							
							<div class="center-retweet-right-delete">
								<%= link_to tweet_retweet_path(tweet.tweet_id, tweet.id), method: :delete, class: "btn btn-default btn-sm", data: { confirm: "Are you sure?" } do %>
									Delete
								<% end %>
							</div>
						</div>	
					</div>
				<% end %>
				
			<% end %>
		</div>
	</div>
</div>

<div class="col-md-3">
	<div class="modal-right">
	
	<h4>Who to follow</h4>
		<% @users.each do |user| %>
			<div class="follow-all">
				<div class="follow-image">	
					<img alt="img" class="img-rounded" height="40" width="40" src="<%= user.image %>" />
				</div>
				
				<div class="follow-user">
					<div class="follow-username">
						<%= user.username %>	
					</div>
					<div class="follow-userId">
						@<%= user.userId%>
					</div>
				</div>		
				
				<div class="follow-bt">
					<% if Follow.new.able?(current_user, user) %>		
						<%= link_to 'UnFollow', tweet_follow_path(user.id, id: current_user.id), method: :delete, class: "btn btn-danger btn-sm", data: { confirm: "Are you sure?" } %>
					<% else %>
						<%= link_to 'Follow', tweet_follows_path(tweet_id: user.id), method: :post, class: "btn btn-info btn-sm" %>
					<% end %>
				</div>
			</div>		
		<% end %>
	</div>
</div>

</div>
</div>